# NodeJS Linker for Bazel Runfiles

`yarn_install` and `npm_install` do not place `node_modules` adjacent to `package.json`, and there
is currently no rule to copy outputs into the correct location. To make up for this limitation a
"linker" is required.

A critical piece of this is linker setup is the script run as part of `nodejs_binary` and
`nodejs_test` executables. This script creates a symlink adjacent to `package.json` pointing to
`node_modules` in the external repository generated by `(yarn|npm)_install`. Care has been taken
to ensure it is thread safe (across both instances of the same executable and a mix).

# Developing

Update checked in generated linker index.js with

```
bazel run //internal/linker:linker_lib_check_compiled.update
```
